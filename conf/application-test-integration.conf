# https://www.playframework.com/documentation/latest/Configuration
baseUrl = "http://localhost:9000"

application.name = JWT Authentication System
application.log = INFO

// Secret to sign csrf and others encryption utils
// It is considered bad practice to put the production secret here
// you should to override it
play.http.secret.key=changeme

play.http.filters = io.xauth.web.filter.Filters
play.http.errorHandler = "io.xauth.web.handler.ErrorHandler"

// enabling modules that loads tasks at startup
play.modules.enabled += "io.xauth.StarterModule"
play.modules.enabled += "io.xauth.actor.ActorModule"
play.modules.enabled += "io.xauth.task.TasksModule"
play.modules.enabled += "play.modules.reactivemongo.ReactiveMongoModule"

akka {
  actor {
    default-dispatcher {
      fork-join-executor {
        // Settings this to 1 instead of 3 seems to improve performance.
        parallelism-factor = 1.0

        parallelism-max = 24

        // Setting this to LIFO changes the fork-join-executor
        // to use a stack discipline for task scheduling. This usually
        // improves throughput at the cost of possibly increasing
        // latency and risking task starvation (which should be rare).
        task-peeking-mode = LIFO
      }
    }
  }
}

task {
  // Task that cleans expired codes
  codeClean.interval = 40
  // Task that cleans expired refresh tokens
  tokenClean.interval = 1
}

// Json Web Token
jwt.expiration = {
  accessToken = 60 // 60 seconds
  refreshToken = 12 // 12 hours
}
jwt.secretKey = {
  // symmetric/asymmetric algorithm are both supported
  algorithm = RS256
  // search path for keypair
  path = /home/auth/.jwt/keys
  // application will create private/public keypair at following paths:
  //  <path>/<workspace-id>-rsa.private.der
  //  <path>/<workspace-id>-rsa.public.der
}

// MongoDB
mongodb.uri = "mongodb://u_auth:p_auth@localhost:28017/auth"

// Maximum login attempts before account block
auth.maxLoginAttempts = 2

// mail.service = ws | smtp
mail.service = smtp

// Internal messaging service
mail.ws.schema = https
mail.ws.host = ws.xauth.com/b2cwsmail/cxf/rest
mail.ws.user = APPLICATION_0003
mail.ws.pass = 1234567890

mail.debug = false

// SMTP server
mail.smtp.host = exchange-relay.xauth.com

// mail.smtp.port = 25 | 465
// - 25: when mail.smtp.channel is set to clear or starttls
// - 465: when mail.smtp.channel is set to ssl
mail.smtp.port = 25
mail.smtp.user = ""
mail.smtp.pass = ""

// mail.smtp.channel = starttls | ssl
//   - starttls: port 25 that will switch to SSL/TLS
//   - ssl: SMTP-over-SSL (SMTPS) connector, that is an SSL socket listening on port 465
mail.smtp.channel = starttls

// invitation.code.notification = manual | auto
//   - manual: code will be generated via api
//   - auto: code will be send via email
invitation.code.notification = manual
